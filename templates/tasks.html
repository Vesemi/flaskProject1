{% extends "base.html" %}
{% block content  %}
<div class="loginBox text-center">
    <main class="form-task w-100 m-auto">
        <div class="row justify-content-center">
        <div class="col-md-12 mb-5">
            <h1 class="h3 mb-3 fw-normal">Tasks</h1>
            <br>
            <form action="/tasks" class="" method="post" novalidate>
            {{ form.hidden_tag() }}
            <div class="form-group row">
                {{ form.title.label(class_="col-sm-3 col-form-label") }}
                {{ form.title(class_="form-control col-sm-9") }}
                {% for error in form.title.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
            <div class="form-group row">
                {{ form.description.label(class_="col-sm-3 col-form-label") }}
                {{ form.description(class_="form-control col-sm-9") }}
                {% for error in form.description.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
                <div class="form-group row">
                {{ form.creator.label(class_="col-sm-3 col-form-label") }}
                {{ form.creator(class_="form-control col-sm-9") }}
                {% for error in form.creator.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
                <div class="form-group row">
                {{ form.contractor.label(class_="col-sm-3 col-form-label") }}
                {{ form.contractor(class_="form-control col-sm-9") }}
                {% for error in form.contractor.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
                <div class="form-group row">
                {{ form.timestamp_created.label(class_="col-sm-3 col-form-label") }}
                {{ form.timestamp_created(class_="form-control col-sm-9") }}
                {% for error in form.timestamp_created.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
                <div class="form-group row">
                {{ form.timestamp_finished.label(class_="col-sm-3 col-form-label") }}
                {{ form.timestamp_finished(class_="form-control col-sm-9") }}
                {% for error in form.timestamp_finished.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
            </br>
            <div class="button col-md-12 text-center">
                <p>{{ form.submit(class_="w-100 btn btn-lg btn-primary") }}</p>
            </div>
            </form>
        </div>
        </div>
    
    </main>
</div>

<div class="container main ">
<div class="table-container container-fluid table-responsive">
	
	<h3 class="mb-4 text-center">Lista zadań</h3>
    <div class="col-md-7">	
        <table class="table text-light table-condensed table-striped custom-table">
        <thead>
            <tr class="row table-width">
                <th scope="col">#</th>
                <th class="col"scope="col">Zadanie</th>
                <th class="col" scope="col">Opis</th>
                <th class="col" scope="col">Utworzył</th>
                <th class="col" scope="col">Wykonawca</th>
                <th class="col" scope="col">Data Utworzenia</th>
                <th class="col" scope="col">Data Zakończenia</th>
            </tr>
        </thead>
        <tbody>

        {% for task in tasks %}
            <tr class="row accordion-toggle collapsed table-width text-secondary" data-toggle="collapse" data-target="#a{{ task.id }}">
                <th scope="row">{{ task.name }}</th>

                    <td class="col">{{ task.title }}</td>
                    <td class="col text-truncate"><div class="fa"></div>{{ task.description }}</td>
                    <td class="col">{{ task.creator }}</td>
                    <td class="col">{{ task.contractor }}</td>
                    <td class="col">{{ task.timestamp_created }}</td>
                    <td class="col">{{ task.timestamp_finished }}</td>


            </tr>
            <tr class="row table-width">
                <td colspan="6" class="hiddenRow">
                    <div id="a{{ task.id }}" class="accordian-body collapse text-break hiddenDescription text-secondary">{{ task.description }}</div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
        </table>

    </div>
        
</div> 
</div>

{% endblock %}